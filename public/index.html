<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Git and Python and C.</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/solarized.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-transition="fade">
                                    <h2>Data Workflow with python and git</h2>
                                    <h4>14/01/2018</h4>
                                </section>
				<section data-transition="fade" id="git">
                                    <h3>GIT</h3>
                                    <ul>
                                    <li>A version-control system for tracking changes in computer files
                                         and coordinating work on those files among multiple people</li>
                                    <li>Has been written for Linux developments</li>
                                    <li>Distributed</li>
                                    <li>Independent of network access or a central server</li>
                                    <li>Open Source (under GNU GPL v2 and GNU LGPL v2.1)</li>
                                    </ul>
                                </section>
				<section data-transition="fade" id="whygit">
                                    <h3>Why GIT</h3>
                                    <ul>
                                    <li>Which version did the results come from?</li>
                                    <li>What broke the code?</li>
                                    <li>Who did change the code?</li>
                                    <li>I need to go back to my working version and I need it NOW!</li>
                                    </ul>
                                    <br /><br />
                                    <span class="fragment">
                                    Reproducibility, traceability <br />
                                    A versioning system is the key for efficient
                                    <a href="https://gitlab.u-psud.fr/chiara.marmo/python4phd/wikis/FAIR-Data-Workflows">data analysis workflows</a>.
                                    </span>
                                </section>
				<section data-transition="fade" id="gitwf">
                                    <h3>GIT Workflow</h3>
<pre class="bash"><code>
$ mkdir my-amazing-project
$ cd my-amazing-project
$ echo "my amazing file" > myfile.txt
$ git status
fatal: not a git repository (or any parent up to mount point /)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
$ git init
Initialized empty Git repository in /home/cmarmo/temp/my-amazing-project/.git/
$ git status
On branch master

No commits yet

Untracked files:
   (use "git add &#60;file&#62;..." to include in what will be committed)

	myfile.txt

nothing added to commit but untracked files present (use "git add" to track)
$ git add myfile.txt
$ git status
On branch master

No commits yet

Changes to be committed:
  (use "git rm --cached &#60;file&#62;..." to unstage)

	new file:   myfile.txt
$ git commit -m "First commit"
[master (root-commit) acc98d1] First commit
 1 file changed, 1 insertion(+)
 create mode 100644 myfile.txt
$ git status
On branch master
nothing to commit, working tree clean
$ echo "one more line" >> myfile.txt
$ git status
On branch master
Changes not staged for commit:
  (use "git add &#60;file&#62;..." to update what will be committed)
  (use "git checkout -- &#60;file&#62;..." to discard changes in working directory)

	modified:   myfile.txt

no changes added to commit (use "git add" and/or "git commit -a")
$ git diff
diff --git a/myfile.txt b/myfile.txt
index 8cba552..e89a111 100644
--- a/myfile.txt
+++ b/myfile.txt
@@ -1 +1,2 @@
 my amazing file
+one more line
$ git checkout myfile.txt
$ git diff
$ git status
On branch master
nothing to commit, working tree clean
$
</code></pre>
                                  <a href="https://learngitbranching.js.org/?NODEMO" target="_blank">learning git branching</a>
                                </section>
				<section data-transition="fade" id="gitrepo">
                                    <h3>GIT remote repositories managers</h3>
                                      <ul>
                                        <li>
                                           <a href="https://github.com">github</a>
                                        </li>
                                        <li>
                                           <a href="https://bitbucket.org/">Atlassian bitbucket</a>
                                        </li>
                                        <li>
                                           <a href="https://about.gitlab.com/">Gitlab</a>
                                        </li>
                                        <li>
                                           <a href="https://gitea.io/en-us/">GiTea</a>
                                        </li>
                                        <li>
                                           <a href="https://gogs.io/">Gogs</a>
                                        </li>
                                      </ul>
                                <br />
                                <span class="fragment">
                                <a href="https://gitlab.u-psud.fr" target="_blank">Paris Sud GitLab portal</a> for practice.
                                <br />
                                <a href="https://gitlab.in2p3.fr" target="_blank">CCIN2P3 GitLab portal</a> for French collaborations.
                                </span>
                                </section>
                                <section>
				<section data-transition="fade" id="python">
                                    <h3>Python is...</h3>
                                    <li class="fragment">A programming language
                                        <span style="color:green;">TRUE</span>
                                    </li>
                                    <li class="fragment">Written in C
                                        <span style="color:green;">TRUE</span>
                                    </li>
                                    <li class="fragment">An interpreted language
                                        <span style="color:green;">TRUE</span>
                                        <span class="fragment" style="color:red;">/ FALSE</span>
                                    </li>
                                    <li class="fragment">A compiled language
                                        <span style="color:red;">FALSE</span>
                                        <span class="fragment" style="color:green;">/ TRUE</span>
                                    </li>
                                    <li class="fragment">An object-oriented language
                                        <span style="color:green;">TRUE</span>
                                    </li>
                                    <li class="fragment">A procedural language
                                        <span style="color:green;">TRUE</span>
                                    </li>
                                </section>
				<section data-transition="fade" id="pylang">
                                    <h3>Python is...</h3>
                                    An Open Source programming language written in C
                                    <br />
                                    <a href="https://www.python.org" target="_blank">Home page</a>
                                    <br />
                                    <a href="https://github.com/python" target="_blank">Source code</a>
                                </section>
				<section data-transition="fade" id="intcomp">
                                    <h4>interpreted vs. compiled languages</h4>
                                    <table>
                                        <tr><th>Interpreted languages, must be parsed, interpreted,
                                            and executed each time the program is run</th>
                                            <th>The overhead for the translation is incurred just once, when the source is compiled;
                                            thereafter, it need only be loaded and executed</th></tr>
                                        <tr><td>Linux Shell</td><td>C</td></tr>
                                        <tr><td>Microsoft PowerShell</td><td>C++</td></tr>
                                        <tr><td>Matlab</td><td>C#</td></tr>
                                        <tr><td>IDL</td><td>Assembler</td></tr>
                                        <tr><td>PhP</td><td>Rust</td></tr>
                                        <tr><td>Javascript</td><td>OCaml</td></tr>
                                        <tr><td style="color:red;">high-level</td><td style="color:red;">low-level</td></tr>
                                    </table>
                                        <span class="fragment"><a href="https://en.wikipedia.org/wiki/Just-in-time_compilation">Just-in-time compilation</a> (e.g. <a href="https://julialang.org/">Julia</a>)</span>
                                </section>
				<section data-transition="fade" id="ooproc">
                                    <h4>object-oriented vs. procedural languages</h4>
                                    <img src="images/proc-oo.svg" style="width:60%;float:left">
                                    <table>
                                        <tr><td>C</td><td>C++</td></tr>
                                        <tr><td>Fortran</td><td>Java</td></tr>
                                        <tr><td>Python</td><td>Python</td></tr>
                                        <tr><td><pre class="python"><code>
var a
var b
times(a,b)</code></pre></td><td><pre class="python"><code>
var a
var b
a.times(b)</code></pre></td></tr>
                                    </table>
                                    <p>Python is a multi-paradigm programming language</p>
                                    <p>Python3 object oriented model has got stronger</p>
                                    
                                    
                                </section>
                                </section>
                                <section>
				<section  data-transition="fade" id="pyinst">
                                    <h4>Python: how to install it</h4>
                                     <ul>
                                       <li>from source,</li>
                                       <li>from binary (linux, Mac, Windows): distro package manager or pip and easy-install,</li>
                                       <li>from commercial Open Source python distributions (e.g. <a href="https://www.anaconda.com/">anaconda</a> or <a src="https://www.enthought.com">enthought</a>).</li>
                                     </ul></br></br>
                                     <span class="fragment"><h5>We stick to Anaconda distribution</h5>
                                     <ul>
                                       <li>available for Windows, Mac and Linux</li>
                                       <li>support of a large number of Python modules</li>
                                       <li>can manage different dev environment (means dependencies) without root privileges</li>
                                     </ul>
                                     </span>
                                </section>
				<section  data-transition="fade" id="condaTP">
                                    <h4>Python with Anaconda</h4>
<pre class="bash"><code>
$ (base) C:\Users\cmarmo> conda --version
conda 4.5.11

$ (base) C:\Users\cmarmo> conda update conda
</code></pre>
                                <small>Need root / administrator privileges</small>
<pre class="bash"><code>
$ (base) C:\Users\cmarmo> python --version
Python 3.6.3 :: Anaconda custom (64-bit)

$ (base) C:\Users\cmarmo> conda create --name python2 python=2.7
Solving environment: done

....

Proceed ([y]/n)?

....

# To activate this environment, use
#      $ conda activate python2
#
# To desactivate an active environment, use
#      $ conda deactivate

$ (base) C:\Users\cmarmo> conda activate python2
$ (python2) C:\Users\cmarmo> python --version
Python 2.7.15 :: Anaconda, Inc.
</code></pre>
<small>some commands are OS dependent check the <a href="https://conda.io/docs/user-guide/getting-started.html#" target="_blank">documentation</a></small>
                                </section>
				<section  data-transition="fade" id="reqtxt">
                                    <h4>Requirements.txt</h4>
<pre class="text"><code>
#
####### example-requirements.txt #######
#
###### Requirements without Version Specifiers ######
nose
nose-cov
beautifulsoup4
#
###### Requirements with Version Specifiers ######
#   See https://www.python.org/dev/peps/pep-0440/#version-specifiers
docopt == 0.6.1             # Version Matching. Must be version 0.6.1
keyring >= 4.1.1            # Minimum version 4.1.1
coverage != 3.5             # Version Exclusion. Anything except version 3.5
Mopidy-Dirble ~= 1.1        # Compatible release. Same as >= 1.1, == 1.*
#
###### Refer to other requirements files ######
-r other-requirements.txt
#
#
###### A particular file ######
./downloads/numpy-1.9.2-cp34-none-win32.whl
http://wxpython.org/Phoenix/snapshot-builds/wxPython_Phoenix-3.0.3.dev1820+49a8884-cp34-none-win_amd64.whl
#
###### Additional Requirements without Version Specifiers ######
#   Same as 1st section, just here to show that you can put things in any order.
rejected
green
#
</code></pre>
<small>from <a href="https://pip.pypa.io/en/stable/reference/pip_install/#requirements-file-format" target="_blank">pip documentation</a></small>
                                </section>
				<section  data-transition="fade" id="reqtxt2">
                                <h4>Requirements.txt . 2</h4>
                                <small>with pip</small>
<pre class="bash"><code>$ pip install -r requirements4pip.txt</code></pre>
<small>with conda</small>
<pre class="bash"><code>$ conda create -n newenv --file requirements4conda.txt
Solving environment: done

....

Proceed ([y]/n)?

....

# To activate this environment, use
#      $ conda activate newenv
#
# To desactivate an active environment, use
#      $ conda deactivate
$ conda activate newenv
$ pip install -r pipinconda.txt</code></pre>
<small>to generate a requirements.txt</small>
<pre class="bash"><code>(newenv)$ conda list -e > req.txt</code></pre>
                                </section>
                                <section>
                                  <small>to remove a conda environment</small>
<pre class="bash"><code>(newenv)$ conda deactivate
(base)$ conda env remove --name newenv
</code></pre>
                                </section>
                                </section>
				<section  data-transition="fade" id="vartype">
                                  <section>
                                    <h4>Python3: The standard type hierarchy</h4>
                                    <img src="images/Python_3._The_standard_type_hierarchy.png" style="width:40%;"/>
                                    <p><small>By <a href="//commons.wikimedia.org/wiki/User:%D0%9C%D0%B0%D0%BA%D1%81%D0%B8%D0%BC_%D0%9F%D0%B5" title="User:Максим Пе">Максим Пе</a> - <span class="int-own-work" lang="en">Own work</span>, <a href="https://creativecommons.org/licenses/by-sa/4.0" title="Creative Commons Attribution-Share Alike 4.0">CC BY-SA 4.0</a>, <a href="https://commons.wikimedia.org/w/index.php?curid=74062464">see on-line version</a></small></p>
                                   </section>
                                   <section id="varjnb">
                                      <h3>Jupyter notebooks examples</h3>
                                        <ul><li>Variables (
                                                <a href="http://localhost:8888/notebooks/sequences.ipynb" target="_blank">Sequences</a>,
                                                <a href="http://localhost:8888/notebooks/sets.ipynb" target="_blank">Sets</a>,
                                                <a href="http://localhost:8888/notebooks/maps.ipynb" target="_blank">Maps</a>
                                            )</li>
                                            <li><a href="http://localhost:8888/notebooks/looping.ipynb" target="_blank">Looping and Control-Flow (Compound) statements</a></li>
                                            <li><a href="http://localhost:8888/notebooks/iofiles.ipynb" target="_blank">Input / Output files</a></li></ul>

                                      <br /><br /> 

                                      <span class="fragment"><h4>Lessons to learn</h4>
                                      <ul>
                                          <li>Implicit variable type
                                              <ul>
                                                  <li>Lower performances</li>
                                                  <li>Initialisation mistakes</li>
                                                  <li>No control on type guessing</li></ul>
                                          <li>Lacking of math specific array type to optimise vectorization</li>
                                          <li>Have you seen any plotting functions?</li>
                                      </ul>
                                      </span>
                                   </section>
                                </section>
				<section  data-transition="fade" id="modules">
                                    <section data-transition="fade" id="numpy">
                                        <h3>Modules: <a href="http://www.numpy.org/" target="_blank">Numpy</a></h3>
                                          <ul>
                                             <li>a powerful N-dimensional array object</li>
                                             <li>a vectorial approach to functions (broadcasting)</li>
                                          </ul><br />
                                        <a href="http://localhost:8888/notebooks/numpy.ipynb" target="_blank">A quick view notebook</a>
                                      <br /><br /><span class="fragment" id="scipy">
                                        <h3>Modules: <a href="https://docs.scipy.org/doc/scipy/reference/" target="_blank">Scipy</a></h3>
                                          <ul>
                                             <li>high-level statistical functions</li>
                                             <li>signal processing functions</li>
                                             <li>integrator functions</li>
                                             <li>linear algebra</li>
                                             <li>...</li>
                                          </ul><br />
                                    </span>
                                    </section>
                                    <section data-transition="fade" id="matplotlib">
                                        <h3>Modules: <a href="https://matplotlib.org/index.html" target="_blank">MatplotLib</a></h3>
                                        <p>Matplotlib is a Python 2D plotting library (3D via an extension) which produces
                                           publication quality figures
                                           in a variety of hardcopy formats and interactive environments across platforms.</p>
                                        <a href="https://www.anaconda.com/blog/developer-blog/python-data-visualization-2018-why-so-many-libraries/" target="_blank">Why Matplotlib?</a><br/><br/>
                                        <a href="http://localhost:8888/notebooks/matplotlib.ipynb" target="_blank">A quick view notebook</a>
                                    </section>
                                    <section data-transition="fade" id="pandas">
                                        <h3>Modules: <a href="https://pandas.pydata.org/">Pandas</a></h3>
                                          <ul>
                                              <li>A fast and efficient DataFrame object for data manipulation</li>
                                              <li>Tools for reading and writing data in different formats</li>
                                              <li>High performance merging and joining of data sets</li>
                                              <li>Time series-functionality: date range generation and frequency conversion, moving window statistics, moving window linear regressions, date shifting and lagging.
                                              <li><a href="https://pandas.pydata.org/#library-highlights">...</a></li>
                                          </ul>
                                          Check <a href="http://nbviewer.ipython.org/urls/gist.github.com/wesm/4757075/raw/a72d3450ad4924d0e74fb57c9f62d1d895ea4574/PandasTour.ipynb" target="_blank">Wes McKinney tutorial notebook</a>
                                    </section>
                                    <section data-transition="fade" id="advanced">
                                        <h3>Other useful modules:</h3>
                                         <ul>
                                           <li><a href="http://scikit-learn.org/stable/index.html" target="_blank">Scikit-learn</a></li>
                                           <li><a href="https://scikit-image.org/" target="_blank">Scikit-image</a> and <a href="https://docs.opencv.org/3.4/d6/d00/tutorial_py_root.html" target="_blank">OpenCV bindings</a></li>
                                           <li><a href="https://rasterio.readthedocs.io/en/latest/" target="_blank">Rasterio</a> and <a href="https://pypi.org/project/GDAL/" target="_blank">GDAL bindings</a></li>
                                           <li><a href="http://www.astropy.org/" target="_blank">Astropy</a></li>
                                           <li><a href="http://geopandas.org/" target="_blank">GeoPandas</a></li>
                                           <li><a href="http://linkedearth.github.io/Pyleoclim_util/" target="_blank">pyleoclim</a></li>
                                           <li>...</li>
                                         </ul>
                                    </section>
                                </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
